<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
  <link rel="manifest" href="./favicon/site.webmanifest">
  <link rel="mask-icon" href="./favicon/safari-pinned-tab.svg" color="#ff6600">
  <link rel="shortcut icon" href="./favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-config" content="./favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffb380">

  <title>The Outsiders &mdash; Character Cards</title>

  <style>
    @import url("https://rsms.me/inter/inter.css");
    @import url("https://fonts.googleapis.com/css?family=Montserrat:300,600");

    * {
      box-sizing: border-box;
    }

    html {
      font-family: "Inter", sans-serif;
    }

    @supports (font-variation-settings: normal) {
      html {
        font-family: "Inter var", sans-serif;
      }
    }

    body {
      text-align: center;

      background-color: #c0c0c0;
      background: linear-gradient(156deg, rgb(103 67 159) 0%, rgba(125, 71, 177, 1) 23%, rgba(207, 95, 77, 1) 77%, rgba(230, 195, 103, 1) 95%)
    }

    .content,
    .content>* {
      margin-left: auto;
      margin-right: auto;
    }

    .content {
      width: 80%;
      margin-top: 100px;
      margin-bottom: 150px;
      padding: 50px;

      /* In case the transparent fails to work */
      background-color: #f0f0f0;
      background-color: #ffffffd0;
      border-radius: 10px;
    }

    h1 {
      font-family: "Montserrat", sans-serif;
      font-weight: 600;
      font-size: 2.5em;
    }

    .card-container {
      width: 90%;

      position: relative;
      display: flexbox;
      flex-wrap: wrap;
      align-items: center;
      align-content: center;

      background-color: #d0d0d0;
      background-color: #f0f0f0c0;
      border-radius: 10px;
      padding: 20px;
    }

    .card {
      margin: 10px;
      cursor: crosshair;
    }

    .zoom-lens {
      position: absolute;
      border: 1px solid #606060;
      border-radius: 10px;
      width: 200px;
      height: 200px;

      background-repeat: no-repeat;
      background-color: #606060;

      pointer-events: none;
    }

    .footer-message {
      font-family: "Montserrat", sans-serif;
      font-weight: 300;
      color: #404040;
    }
  </style>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NNCV8HEYV9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag("js", new Date());

    gtag("config", "G-NNCV8HEYV9");
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
  <div class="content">
    <h1>The Outsiders &mdash; Character Trading Cards</h1>
    <p>
      <i>
        (hover over an image to zoom in in case the text is too small)<br>
        (also works on touchscreen though I recommend you use a computer)
      </i>
    </p>
    <p>
      <b>If zoom does not work try reloading the page</b>
    </p>

    <div class="card-container">
      <img src="./bob.svg" class="card" id="card-bob">
      <img src="./dally.svg" class="card" id="card-dally">
      <img src="./soda.svg" class="card" id="card-soda">
      <img src="./johnny.svg" class="card" id="card-johnny">
      <img src="./ponyboy.svg" class="card" id="card-ponyboy">
      <img src="./darry.svg" class="card" id="card-darry">
    </div>

    <p class="footer-message">
      Copyright &copy; Brandon and Asher 2022 <br>
      Site programmed by Asher
    </p>

    <script>
      const scale = 2;

      function addZoom(imageID) {
        /** @type HTMLImageElement */
        const image = document.getElementById(imageID);

        // Create a new zoom lens
        const lens = document.createElement("div");
        image.parentElement.appendChild(lens);
        lens.style.display = "none";
        lens.setAttribute("class", "zoom-lens");
        lens.style.backgroundImage = `url("${image.src}")`;
        lens.style.backgroundSize = `${image.width * scale}px ${image.height * scale}px`;

        /**
         * @param {MouseEvent} e
         * @returns {x: number, y: number}
         */
        const cursorPos = function (e) {
          // In case something weird happened
          e = e || window.event;

          // Get the image's position
          const imagePos = image.getBoundingClientRect();

          // Calculate the cursor's position relative to the image
          var x = e.pageX - imagePos.left;
          var y = e.pageY - imagePos.top;

          // Consider page scrolling
          x -= window.pageXOffset;
          y -= window.pageYOffset;

          return { x: x, y: y };
        }

        /** @param {MouseEvent} e */
        const moveLens = function (e) {
          e.preventDefault();

          lens.style.display = "block";

          var pos = cursorPos(e);

          // Calculate the position of the top-left corner of the lens
          var x = pos.x - (lens.offsetWidth / 2);
          var y = pos.y - (lens.offsetHeight / 2);

          /** @param x number @param a number @pararm b number */
          var clamp = function (x, a, b) {
            if (x < a) return a;
            if (x > b) return b;
            return x;
          }

          x = clamp(x, 0, image.offsetWidth - lens.offsetWidth);
          y = clamp(y, 0, image.offsetHeight - lens.offsetHeight);

          // Reposition lens image
          pos.x = clamp(
            pos.x * scale - (lens.offsetWidth / 2),
            0,
            (image.offsetWidth - (lens.offsetWidth / 2)) * scale);
          pos.y = clamp(
            pos.y * scale - (lens.offsetHeight / 2),
            0,
            (image.offsetHeight - (lens.offsetHeight / 2)) * scale);

          lens.style.backgroundPosition = `-${pos.x}px -${pos.y}px`;

          // Reposition lens
          lens.style.left = `${x + image.offsetLeft}px`;
          lens.style.top = `${y + image.offsetTop}px`;
        }

        /** @param {MouseEvent} e */
        const removeLens = function (e) {
          e.preventDefault();
          lens.style.display = "none";
        }

        // Add event listeners
        $(image)
          .on("mousemove", moveLens)
          .on("mouseout", removeLens);
        // Also for touchscreen
        $(image)
          .on("touchstart", moveLens)
          .on("touchmove", moveLens)
          .on("touchend", removeLens);
      }

      // Add zoom lenses to all images
      setTimeout(() => {
        addZoom("card-bob");
        addZoom("card-dally");
        addZoom("card-soda");
        addZoom("card-johnny");
        addZoom("card-ponyboy");
        addZoom("card-darry");
      }, 500);
    </script>
  </div>
</body>

</html>